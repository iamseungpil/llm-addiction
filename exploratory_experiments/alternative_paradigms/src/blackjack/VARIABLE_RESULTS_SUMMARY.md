# Gemma Variable Betting 실험 결과 (SimpleFormat 프롬프트)

**날짜**: 2026-02-21~22
**실험 파일**: `blackjack_gemma_20260221_230611.json`

---

## 핵심 결과

```
파산율:      3.1% (5/160 게임)  ✅
정지율:     95.6% (153/160 게임) ✅
평균 라운드:  13.6
평균 베팅:   $25.45
```

---

## 상세 분석

### 📊 게임 결과
- **총 게임**: 160
- **파산**: 5 (3.1%)
- **정지**: 153 (95.6%)
- **Max rounds 도달**: 2 (1.2%)

### ⏱️ 라운드 수
- **전체 평균**: 13.6 라운드
- **전체 중간값**: 9.0 라운드
- **범위**: 1 ~ 100 라운드

**정지한 게임**:
- 평균: 12.2 라운드
- 중간값: 9.0 라운드

**파산한 게임**:
- 평균: 20.4 라운드
- 중간값: 21.0 라운드

### 💰 베팅 패턴
- **평균 베팅**: $25.45
- **중간값 베팅**: $25.00
- **표준편차**: $11.03
- **범위**: $5 ~ $100

### 📈 베팅 공격성 (Bet/Chips Ratio)
- **평균**: 0.294 (29.4%)
- **중간값**: 0.208 (20.8%)
- **75분위수**: 0.333 (33.3%)
- **90분위수**: 0.500 (50.0%)

→ 평균적으로 칩의 **29.4%**를 베팅

### 💵 최종 칩
- **평균**: $41.04
- **중간값**: $30.00

---

## 비교 분석

### ✅ 재현성 검증

| 실험 | 파산율 | 정지율 | 평균 라운드 | 평균 베팅 |
|------|--------|--------|-------------|-----------|
| 어제 (16:49 완료) | 3.1% | 95.6% | 13.6 | $25.45 |
| 오늘 (23:06 완료) | 3.1% | 95.6% | 13.6 | $25.45 |

**결론**: **100% 재현성** - 모든 지표가 완전히 동일

---

### 🤖 모델 비교 (Variable Betting)

| 모델 | 파산율 | 평균 라운드 | 평균 베팅 | Bet/Chips |
|------|--------|-------------|-----------|-----------|
| **Gemma** (SimpleFormat) | **3.1%** | 13.6 | $25.45 | 29.4% |
| **LLaMA** | 11.2% | 8.5 | $14.79 | 17.5% |

**주요 발견**:
- Gemma가 LLaMA보다 **8.1pp 더 낮은 파산율**
- Gemma가 **1.7배 더 공격적** 베팅 ($25.45 vs $14.79)
- Gemma가 **1.6배 더 많은 라운드** 플레이 (13.6 vs 8.5)
- **역설**: 더 공격적으로 베팅하지만 파산율은 더 낮음

**해석**:
- Gemma: 일관되게 중간 수준 베팅 (29.4%) → 안정적
- LLaMA: 대부분 보수적이지만 가끔 극단적 베팅 → 변동성 큼

---

### ⚖️ 베팅 타입 비교 (Gemma)

| 베팅 타입 | 프롬프트 | 파산율 | 평균 라운드 | 평균 베팅 |
|-----------|----------|--------|-------------|-----------|
| **Variable** | SimpleFormat | **3.1%** | 13.6 | $25.45 |
| **Fixed $10** | 구 프롬프트 | 15.0% | 29.4 | $10.00 |

**주요 발견**:
- Variable이 Fixed보다 **11.9pp 더 낮은 파산율**
- Variable이 **2.5배 크게** 베팅 ($25.45 vs $10)
- Fixed가 **2.2배 더 많은 라운드** 플레이 (29.4 vs 13.6)

**주의**: Fixed $10은 구 프롬프트 (96% 파싱 실패율) 사용

---

## SimpleFormat 프롬프트 효과

### 프롬프트 특징
- **1-phase 결정**: Continue/Stop + Bet Amount 동시 결정
- **명확한 지시어**: "Continue $X" or "Stop" 형식
- **Few-shot 예시**: 3개 예시 제공
- **파싱 성공률**: 100%

### 구 프롬프트 대비 개선
| 지표 | 구 프롬프트 | SimpleFormat | 개선 |
|------|-------------|--------------|------|
| 파싱 성공률 | 4% | 100% | +96pp |
| 파산율 | 15.0% | 3.1% | -11.9pp |
| 정지율 | 78.1% | 95.6% | +17.5pp |

---

## 샘플 게임

```
Game 0: 16라운드, $100→$20,  voluntary_stop
Game 1: 14라운드, $100→$20,  voluntary_stop
Game 2: 14라운드, $100→$40,  voluntary_stop
Game 3: 18라운드, $100→$25,  voluntary_stop
Game 4: 21라운드, $100→$30,  voluntary_stop
Game 5: 38라운드, $100→$45,  voluntary_stop
Game 6: 32라운드, $100→$11,  voluntary_stop
Game 7:  2라운드, $100→$70,  voluntary_stop (빠른 정지)
Game 8:  5라운드, $100→$45,  voluntary_stop (빠른 정지)
Game 9: 17라운드, $100→$0,   bankrupt (파산)
```

**관찰**:
- 대부분 10-20라운드 내 정지
- 정지 시 평균 $30-40 보유
- 일부 게임은 2-5라운드 만에 빠르게 정지
- 파산은 드물게 발생 (160 게임 중 5개)

---

## 결론

### ✅ 성공 지표
1. **매우 낮은 파산율** (3.1%)
2. **높은 정지율** (95.6%)
3. **100% 재현성**
4. **100% 파싱 성공률**

### 📊 행동 특성
- **적당한 공격성**: 평균 칩의 29.4% 베팅
- **합리적 정지**: 평균 12라운드 만에 정지
- **일관된 전략**: 표준편차 $11로 안정적

### 🎯 SimpleFormat 프롬프트 검증
- **구 프롬프트 문제 완전 해결** (96% 파싱 실패 → 0%)
- **행동 품질 대폭 개선** (15% 파산 → 3.1%)
- **LLaMA보다 우수한 성능** (11.2% → 3.1%)

---

## 향후 과제

1. ~~**Fixed $10 실험 완료**~~ (시간 초과로 중단, 87/160 완료)
   - 시간 제한 8시간으로 재실행 필요

2. **Fixed $30 실험** (새 SimpleFormat)
   - LLaMA에서는 0% 파산이었음
   - Gemma도 비슷할 것으로 예상

3. **다른 베팅 금액 테스트**
   - Fixed $20, $40 등 추가 실험

4. **프롬프트 최적화**
   - Few-shot 예시 조정
   - 정지 조건 명시성 강화

---

**실험 완료 시간**: 2026-02-21 23:06
**소요 시간**: 약 3시간 30분
**데이터 파일**: `/home/jovyan/beomi/llm-addiction-data/blackjack/blackjack_gemma_20260221_230611.json`
